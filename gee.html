<!DOCTYPE html>
<html lang="en-UK">
<head>
  <Title> Biography of Linus Agbleze </Title>
  <meta charset="UTF-8">
  <Title> Website of Agrimetry business </Title>
  <meta charset="UTF-8">
  <meta name="keywords" content="Linus Agbleze, Linus biography, Strive code preparation, Learn to code">
  <meta name="description" content="Agrimetry support to small scale farmers">
  <meta name="author" content="Linus Agbleze">
  <meta http-equiv="refresh" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="gee.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>
<body style="display: grid">
    <header>
        <nav>
            <div class="topnav" id="myTopnav">
                <a href="#home" class="active">Home</a>
                <a href="#news">News</a>
                <div class="dropdown">
                  <button class="dropbtn">Conference works 
                    <i class="fa fa-caret-down"></i>
                  </button>
                  <div class="dropdown-content">
                    <a href="#">CERES 2019</a>
                    <a href="#">BET 2020</a>
                    <a href="#">GEOBUS 2019</a>
                    <a href="#">First Health and Migration Collaborative Community Symposium</a>
                  </div>
                </div>
                <div class="dropdown">
                    <button class="dropbtn">Publications and writing 
                      <i class="fa fa-caret-down"></i>
                    </button>
                    <div class="dropdown-content">
                      <a href="#">Academic publication</a>
                      <a href="#">Non-academic publication</a>
                      <a href="#">Journal review for</a>
                    </div>
                  </div> 
                <a href="#about">Project activities</a>
                <a href="#contact">Contact</a>
                <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
              </div>
        </nav>
            
            <script>
            function myFunction() {
              var x = document.getElementById("myTopnav");
              if (x.className === "topnav") {
                x.className += " responsive";
              } else {
                x.className = "topnav";
              }
            }
            </script>
    </header>

    <sidebar class="sidebar">
        <div style="display: inline-flex"><img src="gee-tut.png" style="width: 15%; height: 15%;" class="title-logo"><h2>Google Earth Engine (GEE)</h2></div>
        <div>
            <span><h3><i class="fas fa-book"></i>Introduction to GEE</h3></span>

        </div>

        <div>
            <div><h3><i class="fas fa-book"></i>Normalized Difference Vegetation Index (NDVI) </h3></div>
            
            
        </div>
        <div class="file-align">
            <div><i class="fas fa-file-alt"></i>Why GEE for Time series analysis</div>
            <div><i class="fas fa-file-alt"></i>Coding practice</div>
            <div><i class="fas fa-file-alt"></i>Interpretation of results</div>

        </div>

        <div>
            <div><h3><i class="fas fa-book"></i>Random Forest classification (Binary)</h3></div>
            <div><i class="fas fa-file-alt"></i>Why GEE for Time series analysis</div>
            <div><i class="fas fa-file-alt"></i>Coding practice</div>
            <div><i class="fas fa-file-alt"></i>Interpretation of results</div>
        </div>

        <div>
            <div><h3><i class="fas fa-book"></i>Time Series analysis of biomes</h3></div>
            <div><i class="fas fa-file-alt"></i>Time series analysis with GEE</div>
            <div><i class="fas fa-file-alt"></i>Why GEE for Time series analysis</div>
            <div><i class="fas fa-file-alt"></i>Coding practice</div>
            <div><i class="fas fa-file-alt"></i>Interpretation of results</div>
        </div>
                
    </sidebar>

    <main>
        <div>
            <h2>Introduction fo GEE</h2>
            <p>The era of big data calls for the use of tools with capacity to analyze large volumes of data at fast pace as
                well as gain deeper understanding of long term spatio-temporal phenomena. Arguably, big data analysis
                requires capacities that lies beyond the scope of most conventional remote sensing software. This report
                in demonstrating the practice of techniques in analyzing big data, uses Google Earth Engine and R
                programming for a plethora of geospatial analysis including Normalized Difference Vegetation Index
                (NDVI) estimation, binary classification, time series analysis, Land Surface Temperature and NDVI
                correlation analysis among others. Dataset used varied from different sensors to include Landsat 8, Sentinel-2, and MODIS. 
                The different tools used were applied to different set of analysis and dataset. In
                that regard, the workflow of analysis as practiced is documented in separate sections in this report based
                on the tool used. This was done for the purpose of clarity. Insights are also provided on the rational
                behind the various techniques used and supplemented with links to codes used. Further, the results of the
                various analysis are captured and interpreted accordingly. A great utility in the use of Google Earth
                Engine and R programming which is explored in this report is the ability to automate geospatial processes
                for a large volume of data with high velocity.</p>
    
        </div>

        <div>
            <h2>Analysis with Google Earth Engine</h2>
            <p>
                Google Earth Engine (GEE) is a cloud computing platform for geospatial analysis 
                of global coverage. GEE allows the use of both Graphic User Interface (GUI) and 
                Coding User Interface for analysis. The Coding User Interface supports Python 
                and Java-script for coding and an interface for visualization. For this report, 
                Java-script was used in the Coding User Interface for creating processing chain 
                for Landsat 8imagery, binary classification of water and no water regions and inspecting 
                time series over different biomes. Each of these analysis and their codes are 
                detailed in various sections below.
            </p>
        </div>
        

        
        <div>
            <h2>Create a processing chain for Landsat 8 imagery</h2>
            <p>
                The processing chain for Landsat 8 imagery starts by first importing the Surface 
                Reflectance dataset and assigning it to a variable. The dataset imported had an 
                ImageCollection ID being LANDSAT/LC08/C01/T1_SR. Describing the dataset used, 
                it is atmospherically corrected and has 5 visible and near-infrared (VNIR) bands, 
                2 short-wave infrared (SWIR) bands and two thermal infrared (TIR). The image collection 
                was reduced by filtering it by time which was from 1st January 2018 to 31st 
                December 2018 and the area of interest used to filter by location was 
                south-western part of Finland. Further, cloud masking function was created to 
                remove clouds and applied over the image collection to depict a clear condition 
                over the image collection. This was followed by creation of NDVI function using “ .normalizedDifference() ” 
                to calculate NDVI for Landsat 8. The formula for NDVI and the bands in correspondence 
                with Landsat 8 are depicted as follows,

                NDVI = (NIR - RED) / (NIR + RED)
                RED is band 4 with wavelength of 0.64µm to 0.67µm;
                NIR is band 5 with wavelength of 0.85µm to 0.88µm. To calculate the maximum NDVI 
                of the collection, the “ .max” function was applied over the collection NDVI. 
                The maximum NDVI calculated over the collection was 1.0 which corresponds to 
                dense green vegetation in the area of interest. This was displayed as a layer on 
                the map using “addLayer”. The workflow is summarize below
            </p>
        </div>

        <div>
            <h2> Processing chain for Landsat 8 imagery</h2>
            <div class="fig-img">
                <img src="NDVI process GEE.jpg" class="fig-img2">
            
            </div>
            <small>Source: Author</small>
            
        
        </div>

        <div>
            The codes used in executing the workflow above can be access at this<a href="https://code.earthengine.google.com/10a40ac029daa82fdcd4423f47c9dd4a"> link</a>
            <p>Also, the code is highlighted below</p> 
        </div>


        <div class="code-container">
            <code class="codeBlock">

            </code>
        </div>

        <!--Binary Classification begins here-->
        <div>
            <h2>Binary classification with Random Forest(water/no water)</h2>
            <div>
                <p> Sentinel-2 data with the image collection ID “COPERNICUS/S2” was loaded and 
                    assign to a variable for the analysis. The image collection was filtered by 
                    date (.filterDate) ranging from 1st January, 2018 to 31st December, 2018 and 
                    filtered by location using “ .filterBounds(aoi)” to cover part of eastern Switzerland
                    as region of interest. Metadata filtering was done to include only images with less than 
                    10% cloud cover using the function “.filterMetadata('CLOUDY_PIXEL_PERCENTAGE', 'less_than', 10)”. 
                    Further, amedian composite of the image collection was made by applying the 
                    function “ .median ”. Binary classification for water was commenced by collecting training 
                    data and defining the water and no water classes accordingly. The median composite 
                    was clipped to the region of interest using the function “.clip(aoi)” and the result 
                    used for training of classifier. This reduces the image collection to cover only the 
                    region of interest. Further, Random Forest classification algorithm was applied to 
                    delineate areas of water and no water. To validate the accuracy of the classification results, 
                    validation confusion matrix and accuracy were evaluated. The workflow for binary classification of surface features into water
                    and no water classes is illustrated in the diagram below
                </p>
                <small>Source: Author</small>
            </div>

        </div>

        <div>
            <h2>Workflow for binary classification</h2>
            <div class="fig-img">
                <img src="binary class workflow.jpg" class="fig-img2">
            </div>
        </div>

        <div>
            The code for and result of executing the workflow can be access by this <a href="https://code.earthengine.google.com/4445f69be19672708829353bfb164401" target="_blank" >link</a>  
        </div>

        <div>
            <h2>Results of Random Forest classification</h2>
            <h4><a href="https://code.earthengine.google.com/4445f69be19672708829353bfb164401" target="iframe_a"> <button type="button">View Results</button></a></h4>
            <iframe src="" width="100%" height="300px" name="iframe_a" style="border:2px solid red;">

            </iframe>
        </div>

        <div>
            <h2>Interpretation of result</h2>
            <p>
                The result which is 0.96 as accuracy indicates a high level of validity and correctness in the application of
                Random Forest on the collection.
            </p>
        </div>

        <!--Time series analysis on GEE-->

        <div>
            <h2>Plot times series for different biomes</h2>
            <p>MODIS dataset with 16 days frequency and 250 meters spatial resolution was loaded for the time series
                analysis. This MODIS collection with an ID being MODIS/006/MOD13Q1 is from the Terra satellite and
                has the bands of Normalized Difference Vegetation Index (NDVI) and Enhanced Vegetation Index (EVI)
                as vegetation layers. The region of interest (ROI) was south-western Germany covering a time period of
                10 years from 1st January, 2007 to 31st December, 2017 for which filters were applied. From literature
                review, different classification schemes exist for classifying biome (De Cáceres and Wiser, 2012). Within
                the ROI, different land surface covers are define in this report to constitute biomes. Delineation of the
                biomes was undertaken with the support of the dataset of Map Legend in GEE. A scale function was 
                created with the scaling factor 0.0001 and applied over the image collection using “ .map(scale) ”. 
                Further, cloud masking function was created and applied to mask-out clouds. The band named “DetailedQA” which contained the Vegetation Index (VI) quality indicators was used for defining bits for cloud. Finally, a time series chart was created and plotted. The workflow for practicing this exercise is summarize in the
                figure below.</p>
        </div>

        <div>
            <h2>Workflow for Plotting Time series of different biomes in GEE</h2>
            <div class="fig-img">
                <img src="time-series workflow.jpg" class="fig-img2">
            </div>            
            <small>Source: Author</small>
        </div>

        <div>
            The code for executing the workflow of the time series can be access from this <a href="https://code.earthengine.google.com/c7edaec9a0a8a529e4fa8324aa727e2e">link</a>
            <button type="button">View Results</button>  
        </div>

        <div>
            <b>Code for analysis is displayed below. You can access the same code by clicking on the 
                link above where you can run it in GEE </b>
            
           
                <div class="code-container">
                    <code class="codeBlock">
                        // Scale the NDVI with fac 0.0001// https://lpdaac.usgs.gov/dataset_discovery/modis/modis_products_table/mod13q1_v006
<br>
function scale(img){
  return img.multiply(0.0001).copyProperties(img,['system:time_start']);
}

// Define a FeatureCollection: Different biomes in the region.

var biomes = ee.FeatureCollection([cropland, Deciduous_broadleaf_forest, Mixed_Forest, Evergreen_Needleleaved, Urban_builtup]);


var getQABits = function(image, start, end, newName) {
    // Compute the bits we need to extract.
    var pattern = 0;
    for (var i = start; i <= end; i++) {
       pattern += Math.pow(2, i);
    }
    // Return a single band image of the extracted QA bits, giving the band
    // a new name.
    return image.select([0], [newName])
                  .bitwiseAnd(pattern)
                  .rightShift(start);
};

// A function to mask out cloudy pixels.
var maskClouds = function(image) {
  // Select the QA band.
  var QA = image.select('DetailedQA');
  // Get the MOD_LAND_QA bits
  var internalCloud = getQABits(QA, 0, 1, 'MOD_LAND_QA');
  // Return an image masking out cloudy areas.
  return image.mask(internalCloud.eq(0));
};


// Get MODIS data and filter with location and time
var MOD_imageCollection = ee.ImageCollection("MODIS/006/MOD13Q1")
.filterBounds(biomes)
.filterDate('2007-01-01', '2017-01-01')
.select(['NDVI','DetailedQA']);

// Map the cloud masking function over the collection.
var collectionCloudMasked = MOD_imageCollection.map(maskClouds);
print(MOD_imageCollection)

// Map scale over image collection
var MOD_imageCollection1 = collectionCloudMasked.map(scale);

// Create a time series chart.
var TimeSeries = ui.Chart.image.seriesByRegion(
    MOD_imageCollection1, biomes, ee.Reducer.mean(), 'NDVI', 250, 'system:time_start', 'label')
        .setChartType('LineChart')
        .setOptions({
          title: 'NDVI Time Series of Different Biomes in South Western Germany',
          hAxis: {
            title: 'Years'
          },
          vAxis: {title: 'NDVI'},
          lineWidth: 2,
          pointSize: 0,
          series: {
            1: {color: '#ff0000'}, // Deciduous Broadleaved forest
            2: {color: '00FF00'}, // Mixed Forest
            3: {color: '#ffc82d'}, // Evergreen Needleleaved forest
            4: {color: '#398b1e'}, // Urban Builtup
            5: {color: '#1633a0'},//  Cropland
  
}});

// Display.
print(TimeSeries);
                    </code>
                </div>
        

        </div>

        <div>
            <h2>
                Time series of different biomes (Preprocessed data)
            </h2>
            <div class="fig-img">
                <img src="time ser result withour cloud.jpg" class="fig-img2">
            </div>            
            <small>Source: Author</small>
        </div>

        <div>
            <h2>Interpretation of result of preprocessed Time series analysis</h2>
            <p>
                Plotting of time series for the different biomes shows that the dataset was plagued 
                with cloud cover which after being masked-out are shown as missing values hence the 
                discontinuity in the graph. The high occurrence of clouds makes precise interpretation 
                difficult whiles it is suggested that the location of the missing values on the graph 
                will most likely not interfere with the suppose pattern in the time series. In this regard, 
                interpretation of the data is better supported with the time series analysis of the raw 
                datawithout cloud masking below.
            </p>
        </div>

        <div>
            <h2> Time series of raw data (without cloud masking)</h2>
                <p>Considering the high impact of cloud cover on the results, a time series analysis
                 of the raw data without cloud masking is also hereby presented for better 
                 interpretation and provision of deeper insight on the analysis. This serves as 
                 a comparative time series analysis between raw and preprocessed data. 
                 Interpretation of the result is also given.
                </p>
        </div>

        <div>
            <p><a href="https://code.earthengine.google.com/6ff52be4f0be44cf28656e2a29c949b0">
                Code for Time series analysis of Raw data (without cloud masking)
            </a>

            <div>
                <h2>Time series of different biomes (Raw data)</h2>
                <div class="fig-img">
                    <img src="time series raw data.jpg" class="fig-img2">
                </div>               
                <small>Source: Author</small>
            </div>
        </div>

        <div>
            <h2>Results of Time series without cloud masking can also be inspected by clicking of the
                view results button below
            </h2>
            <button type="button">View Results</button>
            <iframe>

            </iframe>
        </div>

        <div>
            <h2>Interpretation of raw data (without cloud masking)</h2>
                The result illustrates that whiles different biomes maintained different levels 
                of maximum NDVI within the time series analyzed, the biomes appear to follow a 
                common pattern of attaining the maximum and minimum NDVI within a common time frame. 
                Cropland however deviates from this observation significantly upon visual inspection. Moreover, deciduous broadleaf forest persistently attained the
highest maximum NDVI of 0.9 approximately within each year of the time series around the month of
June. This is closely followed by Mixed forest and Evergreen needleleaved forest. As expected, the NDVI
of Urban builtup have been relatively low compared to others in most periods of the time series. A more
critical view indicates that whiles deciduous broadleaf forest, mixed forest, Evergreen needleleaved forest
and urban builtup biomes are able to sustain their maximum NDVI in their respective cases for a longer
period, cropland experiences a sharp decline immediately after attaining maximum NDVI hence a steep
slope. A suggested explanation in this trend is that cropland is the most disturbed biome by human
activity with persistent farming activities hence continuous change in land cover and land use compared
to the other biomes. A more plausible reason is that the maximum NDVI values of cropland are attained at periods of crop maturity after which there is immediate harvesting leading to a fast change in the land
cover as reflected in the sharp drop in maximum NDVI.
        </div>


        <div>
            <p>At any stage the final product of a remote sensing project is define by it objectives. Hence,
                the result of one analysis can serve as the input for futher analysis elsewhere even using a different
                analytical tool. To domenstrate this, the time series result will be exported and analyzed further 
                using R programming and R studio as the Integrated Development Environment (IDE). 
            </p>
        </div>




    </main>

    <footer>
        <div class="foot align-all">
            <div class="foot-items">
                <div id="contact"><h4>Contact</h4>
                    <address id="opr"; Style="text-align:left;">
    
                        Am Jesuitenhof<br>
                        Bonn<br>
                        Nordrhine Westphalia<br>  
                        Germany<br>
                        Lagbleze@st.ug.edu.gh<br>
                        +4915175701653<br>
                        </address>
                        <!-- 
                        <script>
                        function myFunc5(){
                          document.getElementById("opr").style.fontSize= "20px";
                          document.getElementById("opr").style.color = "red";
                          document.getElementById("opr").style.backgroundColor = "yellow";
                        }
                        </script>
                        <button type="button" onclick="myFunc5()">Magnify</button>
                        -->
                </div>
            </div>
    
            
            <div class="foot-items">
                <div id="projects">
                    <h4>Project collaboration</h4>
                    <p><a href="">Seed 4 Seed project with ACESWorld</a></p>
                    <p><a href="">Pad4Learing project with ACESWorld</a></p>
                    <a href=""></a>
                </div>
            </div>
    
            <div class="foot-items">
                <div id="publish">
                   <h4> Pulications </h4>
                    <p><a href="">Gendered perspective: Climate change adaptation in Malawi</a></p>
                    <p><a href="">Digitalization and innovation as a driver of sole proprietorship in Ghana</a></p>
                    <p><a href="">
                        Climate change mitigation-adaptation matrix: a better tool and benchmark for climate action with policy implication at local and national level.
                        </a>
                    </p>
                    <h5>Blog posts</h5>
                    <p><a href="">Gendered perspective: Climate change adaptation in Malawi</a></p>
                    <p><a href="">COVID-19 SET TO THWART CLIMATE CHANGE ADAPTATION WHILE AIDING MITIGATION</a></p>
                </div>
            </div>
    

        </div>
        
    </footer>
    

</body>


</html>

<!-- 
<head>
<style>
.item1 { grid-area: header; }
.item2 { grid-area: menu; }
.item3 { grid-area: main; }
.item4 { grid-area: right; }
.item5 { grid-area: footer; }

.grid-container {
  display: grid;
  grid-template-areas:
    'header header header header header header'
    'menu main main main right right'
    'menu footer footer footer footer footer';
  grid-gap: 10px;
  background-color: #2196F3;
  padding: 10px;
}

.grid-container > div {
  background-color: rgba(255, 255, 255, 0.8);
  text-align: center;
  padding: 20px 0;
  font-size: 30px;
}
</style>
</head>
<body>

<h1>Grid Layout</h1>

<p>This grid layout contains six columns and three rows:</p>

<div class="grid-container">
  <div class="item1">Header</div>
  <div class="item2">Menu</div>
  <div class="item3">Main</div>  
  <div class="item4">Right</div>
  <div class="item5">Footer</div>
</div>

</body>
</html>

-->